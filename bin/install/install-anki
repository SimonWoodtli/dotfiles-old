#!/bin/sh
## create variable for your system
spruce_type=linux-amd64

## get correct link with jq
URL=$(curl -s https://api.github.com/repos/ankitects/anki/releases/latest | jq -r ".assets[] | select(.name | test(\"${spruce_type}\")) | .browser_download_url")

## download tarball
curl -LJO $URL

## create dir and extract tarball
mkdir dir
tar -xjf ${URL##*/} -C dir

## move program to your local bin
#cd dir/ANKIFOLDER HOW??

## another thing to tinker
#grep -Po '\w\K/\w+[^?]+'
## this regex selects anki-2.1.32-linux-amd64.tar.bz2 without extension: how to make it work with URL##*/ or is there a way to get URL##*/ more precise?
#(.+?)(\.[^.]*$|$)
#sudo make install
#rm -r dir/
#rm ${URL##*/}
