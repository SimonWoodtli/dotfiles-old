#!/bin/sh
## Not finished get pipe-viewer to work and update script accordingly
declare OS=$(uname)
declare cyan=$'\033[36m'
declare red=$'\033[31m'
declare green=$'\033[32m'
declare blue=$'\033[34m'
declare bold=$'\033[1m'
declare reset=$'\033[0m'

if [ $OS != 'Linux' ] ; then
  echo "${red}Error:$reset ${bold}Sorry designed to be installed on Linux only.$reset"
  exit 1
fi

echo "$cyan
██████╗ ██╗██████╗ ███████╗    ██╗   ██╗██╗███████╗██╗    ██╗███████╗██████╗
██╔══██╗██║██╔══██╗██╔════╝    ██║   ██║██║██╔════╝██║    ██║██╔════╝██╔══██╗
██████╔╝██║██████╔╝█████╗      ██║   ██║██║█████╗  ██║ █╗ ██║█████╗  ██████╔╝
██╔═══╝ ██║██╔═══╝ ██╔══╝      ╚██╗ ██╔╝██║██╔══╝  ██║███╗██║██╔══╝  ██╔══██╗
██║     ██║██║     ███████╗     ╚████╔╝ ██║███████╗╚███╔███╔╝███████╗██║  ██║
╚═╝     ╚═╝╚═╝     ╚══════╝      ╚═══╝  ╚═╝╚══════╝ ╚══╝╚══╝ ╚══════╝╚═╝  ╚═╝
$reset"
## install dependencies
sudo dnf install perl-libwww
#sudo dnf install perl-Data-Dumper
#sudo dnf install perl-JSON
sleep 2

[ -d $HOME/Repos/github.com ] || mkdir -p $HOME/Repos/github.com
cd $HOME/Repos/github.com
git clone https://github.com/trizen/pipe-viewer
cd pipe-viewer
perl Build.PL
sudo ./Build installdeps
sudo ./Build install
command -v  pipe-viewer > /dev/null 2>&1 && echo "${green}Done:$reset Installled pipe-viewer successfully."
